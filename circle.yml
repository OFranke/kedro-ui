machine:
  node:
    version: 6.9.0
# deployment:
#   production:
#     branch: master
#     commands:
#       - "[[ ! -s \"$(git rev-parse --git-dir)/shallow\" ]] || git fetch --unshallow"
#       - git push dokku@5.148.131.186:carbon-ui-components master -f
#   staging:
#     branch: develop
#     commands:
#       - "[[ ! -s \"$(git rev-parse --git-dir)/shallow\" ]] || git fetch --unshallow"
#       - git push dokku@5.148.131.186:carbon-ui-components-staging develop:master -f
dependencies:
  post:
  ## install the Cypress CLI Tools
  ## which gives us access to the
  ## `cypress` command used below
    - npm install -g cypress-cli
  cache_directories:
    - /home/ubuntu/.cypress/Cypress
test:
  pre:
    # runs unit tests
    - npm run test
    ## runs the 'start' script which
    ## boots our local app server on port 8080
    ## which cypress expects to be running
    - npm run cypress
  override:
    ## now run cypress in CI mode
    ## which runs all of the tests
    ## and uses the CYPRESS_CI_KEY
    ## environment var by default
    ## which you need to configure
    ## on Circle CI behind the scenes
    - cypress run --record --key cc14c0f3-ca23-431a-bb98-1a2987b3e139:
        timeout: 720

    ## alternatively we could specify
    ## a specific secret key to use
    ## like this without having to
    ## configure anything in Circle CI:
    ## - cypress ci 703b33d9-a00e-4c66-90c2-40efc0fee2c6
